---
const { videos, shorts } = Astro.props;

function wordFreq(items) {
  const s = items
    .map((v) => v.title)
    .join(" ")
    .toLowerCase()
    .replace(/[^\w\sáéíóúñ]/g, " ");
  const words = s
    .split(/\s+/)
    .filter(
      (w) =>
        w.length > 3 &&
        !["manga", "anime", "video", "review", "capítulo", "caps"].includes(w)
    );
  const m = {};
  for (const w of words) m[w] = (m[w] || 0) + 1;
  return Object.entries(m)
    .sort((a, b) => b[1] - a[1])
    .slice(0, 10)
    .map((x) => x[0]);
}
const topWords = wordFreq([...videos, ...shorts]);
---

<section id="curiosidades">
  <div class="container">
    <h2>Curiosidades</h2>

    <div>
      <h3 class="font-semibold mb-2">Palabras más frecuentes</h3>
      <div class="flex gap-2 flex-wrap">
        {
          topWords.map((w) => (
            <span class="px-3 py-1 border rounded-full text-sm">{w}</span>
          ))
        }
      </div>
    </div>
  </div>
</section>

<style>
  #curiosidades {
    padding-block: 3em;
    background: #ffc0ea;
    min-height: 100vh;
    display: grid;
    align-items: start;
    justify-content: center;
  }
</style>
