---
import Layout from "../layouts/Layout.astro";
import Timeline from "../components/Timeline.astro";
import VideoGallery from "../components/VideoGallery.astro";
import Messages from "../components/Messages.astro";
---

<Layout>
  <main class="relative w-full min-h-screen flex items-center justify-center">
    <!-- Apertura -->
    <div
      id="intro"
      class="absolute inset-0 flex items-center justify-center bg-white border-8 border-black text-3xl font-bold text-center transition-opacity duration-1000 z-10"
    >
      <p id="intro-text" class="whitespace-pre-line"></p>
    </div>

    <!-- Contenido -->
    <div
      id="main-content"
      style="display: none; opacity: 0;"
      class="opacity-0 transition-opacity duration-1000"
    >
      <section class="text-center p-8 border-b-8 border-black bg-white">
        <h1 class="text-5xl font-bold mb-2">üéâ 10 a√±os de manga üéâ</h1>
        <p class="text-lg">
          Celebrando una d√©cada de historias, arte y comunidad
        </p>
      </section>

      <Timeline />
      <VideoGallery />
      <Messages />
    </div>
  </main>

  <script>
    const text = "Cap√≠tulo 10:\nUna d√©cada de pasi√≥n por el manga";
    const intro = document.getElementById("intro");
    const introText = document.getElementById("intro-text");
    const mainContent = document.getElementById("main-content");
    let i = 0;

    function typeText() {
      if (i < text.length) {
        introText.textContent += text.charAt(i);
        i++;
        setTimeout(typeText, 80);
      } else {
        setTimeout(() => {
          // Fade out del intro
          intro.style.opacity = "0";
          setTimeout(() => {
            intro.style.display = "none";
            // Mostrar main-content
            mainContent.style.display = "block";
            setTimeout(() => {
              mainContent.style.opacity = "1";
            }, 50); // peque√±o delay para activar la transici√≥n
          }, 1000);
        }, 2000);
      }
    }

    window.addEventListener("DOMContentLoaded", typeText);
  </script>
</Layout>
